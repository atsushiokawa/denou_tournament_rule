<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <link rel="stylesheet" type="text/css" href="normalize.css">
    <title>第5回　将棋電王トーナメント　ルール</title>
  </head>
  <body>
    <h1>第5回　将棋電王トーナメント　ルール</h1>
    <p>2017年9月27日改訂</p>
    <h2>第1章　総則</h2>
    <p>第1条　本規程において、次の各号に掲げる用語の意義は、当該各号に定めるところによる。</p>
    <ol>
      <li>主催者　株式会社ドワンゴ・公益社団法人日本将棋連盟</li>
      <li>本大会　第5回将棋電王トーナメント</li>
      <li>立会人　主催者が任命した本大会立会人</li>
      <li>対戦　本大会における個々の対局</li>
      <li>試合　本大会の各日における、その日の全対戦</li>
      <li>対戦サーバ　CSAサーバプロトコルver.1.1.3に基づくLAN対戦用サーバ</li>
      <li>参加ソフト　本大会に参加するソフト</li>
      <li>指し手生成部　参加ソフトにおける、将棋のルールに則った指し手の生成を行う部分</li>
      <li>インタフェース部　参加ソフトにおける、指し手生成部を除いた部分　対戦サーバとの通信、盤面の表示、累積消費時間の表示等を行う</li>
      <li>使用可能ライブラリ　将棋電王トーナメントライブラリ一覧(http://denou.jp/library.html)に記載されていライブラリ</li>
      <li>定跡データ　指し手生成部のうち、将棋の局面、そこに至る手順、あるいはその一部と、次に指すべき手、指すべきではない手、それぞれの評価値、あるい
        はその一部を記述した部分</li>
      <li>学習部　指し手の生成を行うための評価関数のパラメータを機械学習により調整する場合の、その学習を行う部分</li>
      <li>思考部　指し手生成部、および、学習部のうち、使用可能ライブラリと定跡データを除いた部分<br>
        ただし、使用可能ライブラリを改造して用いる場合は、その改造した部分も含む</li>
      <li>ソフト開発者　思考部に関連するコードの開発者</li>
      <li>参加者　参加ソフトの開発者</li>
      <li>マシン　参加ソフトの使用するすべてのコンピュータ、及び周辺機器</li>
    </ol>
    <p>(目的)<br>
      第2条　本規程は、本大会の参加資格、及び試合・対戦の進行方法について定めることを目的とする。</p>
    <h2>第2章　参加資格</h2>
    <p>(思考部)<br>
      第3条　参加ソフトは、思考部について、自力で十分な工夫を施したものに限る。<br>
      2　ソフト開発者は一つの参加ソフトにのみ参加することができる。<br>
      3　序盤から故意に手数を稼ぎ、引き分けを狙うソフトは参加できないものとする。<br>
      4　大会中に立会人が、序盤から故意に手数を稼ぎ引き分けを狙っていると判断したソフトは、以降の対局を不戦敗とする。</p>
    <p>(使用可能ライブラリ)<br>
      第4条　参加ソフトは、使用可能ライブラリを使用することができる。<br>
      2　使用可能ライブラリは、改造して使うことができる。その場合も、その使用可能ライブラリを使用したこととなる。ただし、改造した使用可能ライブラリそのも
      のは公開しなくて良い。<br>
      3　使用可能ライブラリを使用する場合、参加者は、応募時に使用したライブラリをバージョンも含め申請しなければならない。また、第8条に定めるアピール文書
      に次の各号に掲げる内容を含めなければならない。</p>
    <ol>
      <li>思考部における自力で十分な工夫について具体的詳細な実装方針。</li>
      <li>文書提出時点での使用可能ライブラリ変更点ソースコード。</li>
    </ol>
    <p>4　提出されたソースコードは審査のみに使用し、公開されない。<br>
      5　その後の開発の進捗により使用するライブラリのバージョンを変更した場合は主催者へ通知すること。</p>
    <p>(必須機能)<br>
      第5条　参加ソフトは、次の各号に掲げる機能を持たなければならない。</p>
    <ol>
      <li>任意の局面・手番・残り時間からの将棋の対局の開始と継続。</li>
      <li>任意の時点での対局中断。</li>
      <li>対局中の現在局面の表示。テキストでも良い。</li>
      <li>第19条の規定による、1手毎の消費時間の計測、及び累計消費時間の画面への表示。</li>
      <li>1手毎の指し手と消費時間の記録。対局中断時も、そこまでのすべての指し手と消費時間を取り出せなければならない。</li>
      <li>CSAサーバプロトコルver.1.1.3に基づく、LANによる対局。</li>
      <li>shogi-serverによる「評価値と読筋を記録する拡張」ならびに将棋電王トーナメント用拡張に基づく、評価値・読筋ならびに探索局面数の送
        信。
        <p> <a href="http://shogi-server.osdn.jp/protocol.html#extended-commands">（参
            考）</a><br>
          shogi-serverによる「評価値と読筋を記録する拡張」をさらに拡張し、CSA通信プロトコル(TCP/IP)において１手毎の探索局面数も
          送信しな ければならない。<br>
          クライアントは、指手に続けて,'*の後に評価値と読筋、最後に" #局面数"の文字列を追加し送信する。 </p>
        <p>（例）<br>
          +7776FU, '* 30 <br>
          -<br>
          3334FU +2726FU #5000<br>
          上記例の場合は、<br>
          +7776FU<br>
          の指手を思考するにあたり探索局面数が<br>
          5000<br>
          であったことを示す。<br>
          USIプロトコルに基づいて思考部の開発を行っているソフト開発者向けに、同拡張に対応した特別バージョンのGUIアプリケーション<a href="http://www.geocities.jp/shogidokoro/index.html">「将
            棋所」</a>を主催者 から別途希望者に配布する。</p>
      </li>
      <li>相手の指し手の手入力による対局。</li>
    </ol>
    <p> (推奨機能) <br>
      第6条　参加ソフトは、次の各号に掲げる機能を持つことが推奨される。ただし、機能を持たないことによって不利になることはない。</p>
    <ol>
      <li>千日手の検出。</li>
      <li>LANによる通信で送受信した文字列の必要に応じた表示。</li>
      <li>任意の局面・手番・残り時間からのLANによる通信での将棋の対局の開始と継続。</li>
    </ol>
    <p>(実行機種)<br>
      第7条　参加ソフトを動かすマシンは、主催者が用意したものを使用する。<br>
      [マシン詳細]<br>
    </p>
    <ul>
      <li>OS：Windows 10 Home 64bit（Linuxの使用を希望する場合は、コンピュータ予選初日の前日に各自でOS換装を行うこと）</li>
      <li>CPU：Core i7-6700</li>
      <li>メモリ：32GB（16GB x2）</li>
      <li>VGA：GeForce GTX 1080 Ti</li>
      <li>SSD：240GB<br>
      </li>
    </ul>
    <p></p>
    <h2>第3章　参加申込</h2>
    <p> (参加申込)<br>
      第8条　参加者は、2017年9月24日(日)迄に指定の応募フォームから応募を行い、その後主催者より送られる申込書を別途提出しなくてはならない。<br>
      2　代表者名、及びソフト開発者・開発予定者全員の氏名は公表する。<br>
      3　参加者は、ソフト開発者・開発予定者全員に本大会出場についての承認を得ていなければならない。<br>
      4　参加者は、第3条を満たすことをアピールする文書を指定された期日までに主催者に提出するものとする。<br>
      5　提出されたアピール文書は、本イベントサイト内、番組内で公開される可能性がある。</p>
    <p> (参加の可否の判定)<br>
      第9条　参加ソフトが第2章に定める参加資格を満たさない場合、および第3章に定める参加申込手続きを怠った場合、主催者は参加の差し止めを行う。<br>
      2　参加ソフトが参加資格を満たしているかどうかの判断が難しい場合、最終的な参加の可否は主催者が判定する。<br>
      3　第2章の判定のため、主催者は参加ソフトのソースコードや使用可能ライブラリ等との対戦結果の提出を要求することがある。</p>
    <h2> 第4章　試合方式</h2>
    <p> (予選・決勝の方式)<br>
      第10条　本大会では、予選リーグ・決勝トーナメントを行う。<br>
      2　予選リーグの上位12ソフトが決勝トーナメントへ進む。<br>
      3　コンピュータ予選参加チーム数が16以下の場合には一次予選は行わず、決勝トーナメントから大会を行う。<br>
      4　予選リーグにおいて、その日の受付締切時刻までで確定した参加ソフトが奇数となった場合、対戦組み合わせにおいて余った1つのソフトを不戦勝として処理す
      る。<br>
      <br>
      (遅刻・参加辞退等の取り扱い)<br>
      第11条　参加辞退の場合、各大会の前々日の18時までに主催者まで連絡しなければならない。<br>
      2　受付締切時刻までに受付を済ませず、事務局への参加辞退又は遅刻の連絡もない場合、参加放棄となる。<br>
      3　その日の最初の対戦が開始された後、参加者が事務局に申請し、主催者がやむを得ない事情があると認める場合は、途中で棄権することができる。その場合、そ
      の日 のそれ以降の対戦は不戦敗となる。<br>
      <br>
      (予選リーグ組合せ)<br>
      第12条　1次予選リーグは完全スイス式で8回戦まで実施する。<br>
      2　完全スイス式とは、次の各号に掲げる規則に基づく組合せ法のことをいう。</p>
    <ul>
      <li> 各回毎に、その回の直前までの勝ち:1、引き分け:1/2、負け:0として成績によって組に分け、同成績の組で当てていく。</li>
      <li>1回戦の場合は全員同じ勝ち点とみなす。</li>
    </ul>
    <p>3　予選リーグの各対局の手番は乱数で決定する。<br>
      <br>
      (予選リーグ順位の決定)<br>
      第13条　順位は、引き分けを0.5勝0.5敗と換算した上で、次の各号に掲げる順に適用して決定する。<br>
    </p>
    <ol>
      <li> 勝数の多い者を上位とする。</li>
      <li>ソルコフ(すべての対戦相手の勝星の合計)の多い者を上位とする。</li>
      <li>SB(負かした相手の勝星の合計)の多い者を上位とする。</li>
      <li>ミディアム(負かした相手の勝星が最高と最低の2人を除いた相手の勝星の合計)の多いものを上位とする。</li>
      <li>第一号から第四号までで同順位の者の間で行われた対戦について、DB(勝ち数－負け数)の多い者を上位とする。</li>
      <li>以上の条件で決まらない場合は乱数で決定する。</li>
    </ol>
    <p>(決勝トーナメントの組み合わせ) <br>
      第14条　決勝トーナメントは、予選リーグの順位に基づき、図1の通りの組み合わせとする。ただし、参加チーム数が16以下の場合はその限りではない。 <img

        src="denou_tournament_rule2017.jpg" alt="図1"> </p>
    <p>(決勝トーナメント手番の決定)<br>
      第15条　決勝トーナメントの手番は、振り駒によって決定する。
      <br>
      2　決勝並列3番勝負では、第1局の先後を決めた後は、1局ごとに先後を入れ替えて対局を行う。
      <br>
      3　振り駒は、予選リーグの順位が上位の開発者が行う。
      <br>
      4　振り歩先（表〈歩〉の枚数が多い場合に駒を振った側が先手となる）
      で行われる。</p>
    <p>
      (決勝トーナメント順位の決定)<br>
      第16条　決勝トーナメントは、トーナメントで1位～4位を決め、準々決勝の敗者4ソフトで5位決定トーナメントを実施する。なお、3位と4位の決定は準決勝の敗者2ソフトで3位決定戦を行う。 </p>
    <p>(決勝の対局方法)
      <br>
      第17条　決勝トーナメントのうち決勝は、各将棋ソフト3台ずつのマシンを使用し、並列3番勝負を行う。<br>2　3組のマシンを用い逐次、同一時間帯に対局を開始する。その際、同一ソフトが稼働する3台のマシンの対局開始システム時刻が重複しないよう対局開始時刻に時間差を設ける、ないしはシステム時刻の設定を行う。<br>
      3　決勝に勝ち進んだ参加者は、追加で2台のマシンのセッティングに協力する。<br>
      4　セッティングに長時間かかる場合には、主催者と協議の上、対応を検討する。 </p>
    <h2>第5章　対戦方法</h2>
    <p>
      (対戦の方法)
      <br>
      第18条　対戦は、すべて平手戦とする。
      <br>
      2　対戦開始予定時刻は、主催者がその10分前までに決定し発表する。<br>
      3　対戦は、対戦サーバを介して行う。
      <br>
      4　対戦開始の合図は対戦サーバから送られる。
      <br>
      5　遅刻・不在・マシントラブル等により、対戦開始予定時刻からの対戦開始が不可能な場合、対戦開始までの時間は、対戦開始が不可能な方の持ち時間から差し引かれる。
      <br>
      6　両者とも対戦開始が不可能な場合は、両者の持ち時間から差し引かれる。
      <br>
      7　その他状況については、内容に応じて主催者が判断をする。
      <br>
      8　対戦開始後は、参加ソフトの指し手の決定に影響を与える行為を人間が行ってはならない。
      <br>
      9　次の各号に掲げる操作は、参加ソフトの代表者、あるいはソフト開発者が行うものとする。
      ただし、対戦開始予定時刻までに参加者が事務局に申請し、主催者が認め
      た者
      (以下「代理人」という)
      が操作を行うこともできる。 </p>
    <ol>
      <li>対戦直前の参加ソフトの起動、及び対戦サーバとの接続 </li>
      <li>手入力による対戦における、相手の指し手の入力&nbsp;</li>
    </ol>
    10　立会人
    の指示による、参加ソフトの対戦の中断
    対戦開始後に不慮の事故等で対戦が中断した場合、
    立会人
    が、中断局面あるいはその数手前の局面からの、
    LAN
    による通信や手入力での対戦再開を求めることがある。
    <br>
    11　ソース変更・再コンパイル・相手に合わせたパラメータ調整等は、対戦中は手動で行ってはならない。
    それ以外ならば、対戦と対戦の間であっても、任意に行うことができる。
    <br>
    12　対戦サーバは、大会実施前に主催者がテスト環境を用意し、ネットワーク経由で外部から参加ソフトの
      対戦テストを実施できるものとする。
      ※テスト環境が整い次第、主催者より大会エントリーを行った開発者に個別に告知する。 </p>
    <p>(消費時間)
      <br>
      第19条　1手毎に、実際の消費時間を計測した上で秒未満を切り捨てたものを1手毎の消費時間とする。ただし、ある手の消費時間が1秒未満の場合、その手の消費時間は1秒とする。
      <br>
      すなわち、計測された消費時間をx秒、このルール上の消費時間をs秒と表わすとき、x&lt;2であれば、s=1とする。<br>
      またnを2以上の自然数とするとき、n&lt;=x&lt; n+1であれば、s=nとする。
      <br>
      2　累積消費時間は、1手毎の消費時間を累積したものとする。
      <br>
      3　予選リーグの持ち時間は15分、持ち時間消費後は10秒将棋で対局を行う。
      <br>
      4　決勝トーナメントは持ち時間1時間切れ負けとする。
      <br>
      5　LAN対戦の場合は、対戦サーバが、1手毎の消費時間を計測し、累積消費時間も管理する。
      <br>
      6　対戦サーバが相手の指し手または対戦開始の文字列を送信し、それに対する指し手を受信するまでの時間が1手毎の消費時間となる。
      <br>
      7　ネットワークによる遅延も消費時間に含まれる。
      <br>
      8　手入力対戦の場合は、それぞれの参加ソフトの計測時間を用いる。
      <br>
      9　消費時間の計測や表示に不正があった場合、
      立会人
      が扱いを決定する。</p>
    <p>
      (入玉宣言法)
      <br>
      第20条　1 次の各号に掲げる条件がすべて成立する場合、勝ちを宣言できる
      (以下「入玉宣言」という)
      。
      1
      つでも条件を満たしていない場合、宣言した方が負けとなる。 </p>
    <ol>
      <li>宣言側の手番である。 </li>
      <li>宣言側の玉が敵陣三段目以内に入っている。 </li>
      <li>宣言側が、大駒5点小駒1点で計算して先手の場合28点以上の持点がある。後手の場合27点以上の持点がある。点数の対象となるのは、宣言側の持駒と敵陣三段目以内に存在する玉を除く宣言側の駒のみである。 </li>
      <li>宣言側の敵陣三段目以内の駒は、玉を除いて10枚以上存在する。 </li>
      <li>宣言側の玉に王手がかかっていない。</li>
      <li>宣言側の持ち時間が残っている。 </li>
    </ol>
    <p>2 入玉宣言は、ソフトが行い、画面上に明示した上で「%KACHI」のコマンドを送信する。 </p>
    <p>(勝敗の決定)
      <br>
      第21条　勝敗は、次の各号に掲げる順で決定される。 </p>
    <ol>
      <li>当該の対戦の参加ソフトの代表者、ソフト開発者、又は代理人による投了。なお、投了は、自分の手番時に、立会人にその旨告げることによって行い、立会人が受理したときに成立する。</li>
      <li>立会人による判定。</li>
      <li>対戦サーバによる判定。</li>
      <li>手入力対戦における、参加ソフトによる投了。</li>
    </ol>

    <p>2　勝敗は、それに基づく組合せの発表時、又はその日の試合結果発表時で確定する。
      それ以降は、報告された結果に誤りがあっても、訂正することはできない。</p>
    <p>
      (引き分けの判定)
      <br>
      第22条　予選リーグ、決勝トーナメント共に、256手を超えて、対局が続く場合、立会人がどちらのソフトの負けとも判定せず、千日手でもないときは、その対局を引き分けとする。
      <br>
      2　千日手は指し直さず、引き分けとする。ただし、連続王手の千日手(同一局面の最初と4回目の間の一方の指し手が王手のみだった場合)は、連続王手をかけていたほうが負けとなる。
      <br>
      3　千日手の判定は、LAN対戦の場合対戦サーバが行う。それ以外の場合は、立会人が判定する。
      <br>
      4　決勝トーナメントで引き分けが発生した場合、先後を入れ替えて、予選リーグと同じ持ち時間(15分秒読み10秒)で指し直し局を実施する。
      <br>
      5　決勝戦の並列3番勝負で引き分けが発生した場合は、引き分けとなった対戦のみ先後を入れ替えて、予選リーグと同じ持ち時間(15分、秒読み10秒)で指し直し局を実施する。</p>
    <p>
      (立会人による勝敗判定)
      <br>
      第23条　次の各号に掲げる場合、立会人はそのソフトの負けと判定する。ただし、同時に両者がこの条件を満たした場合はその限りではない。 </p>
    <ol>
      <li>将棋のルールに則った指し手が存在しない局面になった場合。 </li>
      <li>累積消費時間が指定された持ち時間に達した場合。 </li>
      <li>ルール上指せない手を指した場合。 </li>
      <li>相手が正当な入玉宣言を行った場合。 </li>
      <li>正当でない入玉宣言を行った場合。 </li>
      <li>LAN
        対戦において、
        CSA
        サーバプロトコル
        ver.1.1.3
        に規定されない通信を
        行い問題が発生した
        場合。 </li>
      <li>5
        手目思考開始後、ソフトの終了等により指し手の入出力が不可能となった場合。
        ただし、
        原因が主催者側にある
        場合はその限りではない。 </li>
      <li>中断後、
        立会人
        が指定した局面・手番・消費時間からの再開がスムーズにできない場合。 </li>
      <li>本規程で禁止され
        る行為を行ったと
        立会人
        が判定した場合。 </li>
    </ol>
    2　通信ケーブルや電源切断等の事故、あるいは対戦サーバの不具合により中断した場合は、
    立会人
    が勝敗・引き分け・再戦・途中局面からの再開等の扱いを決定する。
    <br>
    3　本大会の進行上問題が生じた場合、対戦の途中であっても、
    立会人
    が勝敗
    (引き分けを含む)
    を決定することがある。
    <br>
    4　その他、トラブルがあった場合は、立会人が勝敗・引き分け・再戦・途中局面からの再開等の扱いを決定する。</p>
    <p>
      (棋譜)
      <br>
      第24条　本大会の各対戦の棋譜は、主催者の判断で、自由に使用や公開ができるものとする。
      <br>
      2　本大会参加者は、自身の参加ソフトの対局の棋譜に関しては、自由に使用公開できるものとする。 </p>
    <p>(賞金)<br>
      第25条　賞金は以下の通り
      とする。</p>
    <table style="width: 150px; height: 16px;">
      <tbody>
        <tr>
          <td>1位</td>
          <td>300万円</td>
        </tr>
        <tr>
          <td>2位</td>
          <td>100万円</td>
        </tr>
        <tr>
          <td style="width: 44.0833px;">3位</td>
          <td style="width: 89.917px;">70万円</td>
        </tr>
        <tr>
          <td>4位</td>
          <td>50万円</td>
        </tr>
        <tr>
          <td>5位</td>
          <td>30万円</td>
        </tr>
      </tbody>
    </table>
    <p>2　賞金は2017年12月末日までに、株式会社ドワンゴより開発者へ支払われる。<br>
    3　業務上賞金の受領が難しい場合など、希望によって賞金を寄付金等へ振り替えることが出来る。`</p>
    <p>
      (将棋放送・イベントへの協力)
      <br>
      第26条　本大会終了後、1位から5位となったソフトは、ドワンゴが主催する将棋放送・イベントでの使用において、主催者ならびに主催者の認める者に対してソフトウェアの使用を許諾するものとする。
      <br>
      2　1位から5位となったソフトは、株式会社ドワンゴにて保存される。 </p>
    <h2>第6章　ルールの変更 </h2>
    <p>第27条　本大会のルールは、滞りなく大会運営を行う事を目的に予告なく変更する場合がある。<br>
      2　ルール変更時点で既に参加応募をしているソフト開発者へは主催者より個別に告知を行う。 </p>
    <p>※
      本ルールは
      世界コンピュータ将棋選手権のルールを参考に作成されています
      。
    </p>
    <p><br>
    </p>
  </body>
</html>
